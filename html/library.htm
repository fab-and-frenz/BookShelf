<html>
    <head>
        <title>BookShelf: Library</title>
        <link rel="stylesheet" type="text/css" href="html/css/nav.css">
    </head>

    <body>
        <script>
            function getBooks() {
                var HTTPRequest = new XMLHttpRequest();
                HTTPRequest.onreadystatechange = function() {
                    if (HTTPRequest.readyState == 4 && HTTPRequest.status == 200) {
                        var books = JSON.parse(HTTPRequest.responseText);
                        var table = document.getElementById("books");
                        var lastRow = null;
                        for (var i = 0; i < books.length; i++) {
                            if (i % 5 == 0 || i == 0) {
                               lastRow = table.insertRow(-1);
                               colIndex = 0;
                            }
                            var col = lastRow.insertCell(-1);
                            var img = new Image();
                            var a = document.createElement('a');
                            img.src = "data:src/png;base64, " + books[i].cover;
                            a.appendChild(img);
                            a.href = "/read?id=" + books[i].id;
                            img.width = 200;
                            col.appendChild(a);
                        }
                    }               
               }

                HTTPRequest.open("GET", "/getbooks", true);
                HTTPRequest.send(null);

            }


            getBooks();
        </script>
        <h1><em>BookShelf</em></h1>
        <ul>
            <li><a href="/library">Library</a></li>
            <li><a href="/settings">Settings</a></li>
        </ul>
        <br />
        <input type="text" placeholder="Search..">
        
 <!--   <div class="dropdown">
            <button class="dropbtn">View:</button>
            <div class="dropdown-content">
                <a href="">GRID</a>
                <a href="">LIST</a>
            </div>
        </div>-->
        <table id="books">
        </table>
    </body>
</html>
