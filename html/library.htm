<html>
    <head>
        <title>BookShelf</title>
    </head>

    <body>
        <script>
            function getBooks() {
                var HTTPRequest = new XMLHttpRequest();
                HTTPRequest.onreadystatechange = function() {
                    if (HTTPRequest.readyState == 4 && HTTPRequest.status == 200) {
                        var books = JSON.parse(HTTPRequest.responseText);
                        var table = document.getElementById("books");
                        var lastRow = null;
                        for (var i = 0; i < books.length; i++) {
                            if (i % 5 == 0 || i == 0) {
                               lastRow = table.insertRow(-1);
                               colIndex = 0;
                            }
                            var col = lastRow.insertCell(-1);
                            var img = new Image();
                            img.src = "data:src/png;base64, " + books[i].cover;
                            img.width = 200;
                            col.appendChild(img);
                        }
                    }
                }

                HTTPRequest.open("GET", "/getbooks", true);
                HTTPRequest.send(null);

            }

            getBooks();
        </script>

        <h1>Books</h1>
        <table id="books">
        </table>
    </body>
</html>
